(this["webpackJsonp@enactive-ac/embdr-pdf-ui"]=this["webpackJsonp@enactive-ac/embdr-pdf-ui"]||[]).push([[0],{123:function(e,t){},124:function(e,t){},125:function(e,t){},126:function(e,t){},127:function(e,t){},157:function(e,t,n){},159:function(e,t,n){"use strict";n.r(t);var r=n(0),c=n(37),i=n(82),o=n(210),a=n(200),u=n(96),s=n(16),l=n(46),d=n.n(l),f=n(64),j=n(10),b=n(193),h=n(206),O=n(77),v=n(101);var p=n(211),g=n(208),m=n(207),x=n(195),w=n(83),P=n(198),S=n.n(P),k=n(201),y=n.n(k),C=n(202),M=n.n(C),I=n(203),E=n.n(I),R=n(204),T=n.n(R),N=n(205),B=n.n(N),F=n(2),W={components:{MuiButton:{styleOverrides:{root:{aspectRatio:"1"}}}},palette:{text:{primary:"#eee"}}},Z=function(e){var t,n=e.paging,c=e.zoom,i=Object(r.useState)(null!==(t=n.pageNumber.toString())&&void 0!==t?t:""),a=Object(j.a)(i,2),u=a[0],s=a[1];return Object(r.useEffect)((function(){var e;s(null!==(e=n.pageNumber.toString())&&void 0!==e?e:"")}),[n.pageNumber]),Object(F.jsx)(o.a,{theme:function(e){return Object(w.a)(e,W)},children:Object(F.jsxs)(b.a,{alignItems:"stretch",direction:"row",spacing:2,sx:{bgcolor:"background.default",color:"text.primary"},children:[Object(F.jsxs)(b.a,{alignItems:"center",direction:"row",px:1,py:0,spacing:1,children:[Object(F.jsx)(x.a,{children:"Page"}),Object(F.jsxs)(p.a,{sx:{"& .MuiButtonGroup-grouped":{minWidth:0,px:0}},children:[Object(F.jsx)(g.a,{onClick:function(){return n.onPrevPage()},children:Object(F.jsx)(S.a,{})}),Object(F.jsx)(m.a,{onBlur:function(){var e=parseInt(u);isNaN(e)||n.onSetPage(e)},onChange:function(e){return s(e.currentTarget.value)},sx:function(e){return{"& .MuiOutlinedInput-input.MuiInputBase-input":{maxWidth:"2rem",p:1,textAlign:"center"},"& .MuiOutlinedInput-notchedOutline":{borderColor:e.palette.primary.main,borderRight:"none",opacity:.5},"& .MuiOutlinedInput-root":{borderRadius:0}}},value:u,variant:"outlined"}),Object(F.jsx)(g.a,{onClick:function(){return n.onNextPage()},children:Object(F.jsx)(y.a,{})})]}),Object(F.jsxs)(x.a,{children:["of ",n.totalPages]})]}),Object(F.jsxs)(b.a,{alignItems:"stretch",direction:"row",children:[Object(F.jsx)(g.a,{onClick:function(){return c.onFitPage()},title:"Fit page",children:Object(F.jsx)(M.a,{})}),Object(F.jsx)(g.a,{onClick:function(){return c.onFitWidth()},title:"Fit width",children:Object(F.jsx)(E.a,{})}),Object(F.jsx)(g.a,{onClick:function(){return c.onZoomOut()},title:"Zoom in",children:Object(F.jsx)(T.a,{})}),Object(F.jsx)(g.a,{onClick:function(){return c.onZoomIn()},title:"Zoom out",children:Object(F.jsx)(B.a,{})})]})]})})},z=function(){var e,t=Object(r.useState)(1),n=Object(j.a)(t,2),c=n[0],i=n[1],o=Object(r.useState)(1),a=Object(j.a)(o,2),l=a[0],p=a[1],g=function(){var e=Object(r.useState)(),t=Object(j.a)(e,2),n=t[0],c=t[1],i=Object(r.useCallback)((function(e){return c(null===e?void 0:e)}),[]),o=Object(r.useState)(null===n||void 0===n?void 0:n.getBoundingClientRect()),a=Object(j.a)(o,2),u=a[0],s=a[1];return Object(r.useEffect)((function(){if(null!==n&&void 0!==n){var e=new ResizeObserver((function(){return s(n.getBoundingClientRect())}));return e.observe(n),function(){return e.disconnect()}}}),[n]),[i,u]}(),m=Object(j.a)(g,2),x=m[0],w=m[1],P=Object(r.useState)(),S=Object(j.a)(P,2),k=S[0],y=S[1],C=function(e,t){var n=Object(r.useState)({completed:!1}),c=Object(j.a)(n,2),i=c[0],o=c[1];return Object(r.useEffect)((function(){var t=!0;return Object(f.a)(d.a.mark((function n(){var r;return d.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,e();case 3:r=n.sent,t&&o({completed:!0,value:r}),n.next=10;break;case 7:n.prev=7,n.t0=n.catch(0),t&&o({completed:!0,error:n.t0});case 10:case"end":return n.stop()}}),n,null,[[0,7]])})))(),function(){t=!1}}),t),i}(Object(f.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===k){e.next=6;break}return e.next=3,Promise.all((t=k.numPages,Array.from({length:t},(function(e,t){return t+1}))).map((function(e){return k.getPage(e)})));case 3:e.t0=e.sent,e.next=7;break;case 6:e.t0=void 0;case 7:return e.abrupt("return",e.t0);case 8:case"end":return e.stop()}var t}),e)}))),[k]),M=C.value,I=Object(r.useMemo)((function(){if(void 0!==M&&void 0!==w){var e=Math.min(.05*w.width,.05*w.height),t=Math.max.apply(Math,Object(s.a)(M.map((function(e){return e.view[3]})))),n=Math.max.apply(Math,Object(s.a)(M.map((function(e){return e.view[2]})))),r=w.height-e,c=(w.width-2*e)/n,i=Math.min(r/t,c);return{container:M.map((function(t){return{height:t.view[3]*i+e,width:t.view[2]*i+2*e}})),fitPageScale:i,fitWidthScale:c}}}),[M,w]),E=Object(r.useRef)(null),R=Object(r.useState)(),T=Object(j.a)(R,2),N=T[0],B=T[1],W=Object(r.useState)(void 0),z=Object(j.a)(W,2),_=z[0],L=z[1],A=function(e,t){var n=Object(r.useState)(e),c=Object(j.a)(n,2),i=c[0],o=c[1],a=Object(r.useState)(e),u=Object(j.a)(a,2),s=u[0],l=u[1];return Object(r.useEffect)((function(){var e=t(i),n=setTimeout((function(){return l(i)}),e);return function(){return clearTimeout(n)}}),[t,i]),[s,o]}(!1,(function(e){return e?void 0:500})),D=Object(j.a)(A,2),G=D[0],J=D[1],V=Object(r.useCallback)((function(e){var t,n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},c=r.scrollTo,o=Math.max(1,Math.min(null!==(t=null===k||void 0===k?void 0:k.numPages)&&void 0!==t?t:1,e));(i(o),void 0!==c)&&("smooth"===c&&J(!0),null===(n=E.current)||void 0===n||n.scrollToIndex({behavior:c,index:o-1}))}),[k,J,E]),q=Object(r.useCallback)((function(){return V(c+1,{scrollTo:"smooth"})}),[V,c]),H=Object(r.useCallback)((function(){return V(c-1,{scrollTo:"smooth"})}),[V,c]),K=Object(r.useCallback)((function(e){if(void 0!==_){var t,n=Object(u.a)(_);try{for(n.s();!(t=n.n()).done;){var r=t.value;e>=r.offset&&e<r.offset+r.size&&i(r.index+1)}}catch(c){n.e(c)}finally{n.f()}}}),[_]);return Object(r.useEffect)((function(){if(void 0!==N&&!G){function e(){void 0===N||G||K(N.scrollTop)}return K(N.scrollTop),N.addEventListener("scroll",e),function(){return N.removeEventListener("scroll",e)}}}),[G,K,N]),Object(F.jsxs)(b.a,{sx:{height:"100%",justifyContent:"stretch",width:"100%"},children:[Object(F.jsx)(Z,{paging:{onNextPage:q,onPrevPage:H,onSetPage:function(e){return V(e,{scrollTo:"auto"})},pageNumber:c,totalPages:null!==(e=null===k||void 0===k?void 0:k.numPages)&&void 0!==e?e:0},zoom:{onFitPage:function(){return p(1)},onFitWidth:function(){return void 0!==I?p(I.fitWidthScale/I.fitPageScale):void 0},onZoomIn:function(){return p((function(e){return e+.1}))},onZoomOut:function(){return p((function(e){return Math.max(.15,e-.1)}))}}}),Object(F.jsx)(h.a,{ref:x,id:"pages-container",sx:{"& .react-pdf__Document":{height:"100%",width:"100%"},bgcolor:"grey.800",flexGrow:1},children:Object(F.jsx)(O.Document,{file:"/embdr/pages.pdf",onLoadSuccess:function(e){return y(e)},children:void 0!==k&&void 0!==w&&void 0!==I?Object(F.jsx)(v.a,{ref:E,increaseViewportBy:{bottom:5*w.height,top:5*w.height},isScrolling:function(e){e||J(!1)},itemContent:function(e){return Object(F.jsx)(h.a,{sx:{"& .react-pdf__Page":{transform:"scale(".concat(l*I.fitPageScale,")")},alignItems:"center",display:"flex",height:"".concat(I.container[e].height*l,"px"),justifyContent:"center"},children:Object(F.jsx)(O.Page,{onRenderSuccess:function(){return window.dispatchEvent(new Event("resize"))},pageNumber:e+1})})},itemsRendered:function(e){return L(e)},scrollerRef:function(e){return B(null!==e&&void 0!==e?e:void 0)},totalCount:k.numPages}):void 0})})]})};var _=Object(i.a)({palette:{mode:"dark"}}),L=function(){return Object(F.jsxs)(o.a,{theme:_,children:[Object(F.jsx)(a.a,{styles:{"html, body, #root":{height:"100%",width:"100%"}}}),Object(F.jsx)(z,{})]})};n(155),n(156),n(157);Object(c.render)(Object(F.jsx)(L,{}),document.getElementById("root"))},88:function(e,t){}},[[159,1,2]]]);
//# sourceMappingURL=main.e4a466f4.chunk.js.map