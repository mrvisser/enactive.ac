(this["webpackJsonpenactive-integration-ui"]=this["webpackJsonpenactive-integration-ui"]||[]).push([[0],{170:function(e,t,n){"use strict";n.r(t);var o=n(0),a=n.n(o),r=n(23),i=n.n(r),c=n(14),u=n.n(c),l=n(29),s=n(6),d=n(187),v=n(190),p=n(188),b=n(69),f=n.n(b),m=n(7),h=n(191),x=Object(m.a)(Object(m.a)({},{color:"rgba(0, 0, 0, 0.87)"}),{fontFamily:'"Roboto", "Helvetica", "Arial", sans-serif',fontSize:16}),j={"& button":Object(m.a)(Object(m.a)(Object(m.a)({},x),{alignContent:"center",alignItems:"center",borderRadius:"0.4em",cursor:"pointer",display:"inline-flex",flexDirection:"row",justifyContent:"center",lineHeight:"1.5em",margin:0,minWidth:"5em",overflow:"hidden",padding:"0.6em 0.8em",position:"relative",transition:"background 100ms linear",zIndex:1}),{},{background:"rgba(0, 0, 0, 0)",border:"none",boxShadow:"none"}),"& button::before":{background:"#000",bottom:0,content:'""',left:0,opacity:0,position:"absolute",right:0,top:0,zIndex:-1},"& button:active::before, & button:hover::before, & button:focus::before":{opacity:.07},"& button:disabled":{cursor:"default",opacity:.5,pointerEvents:"none"},"& div.enactive-buttongroup":{margin:"-0.5em"},"& div.enactive-buttongroup button":{margin:"0.5em"}},g={"& button.enactive-contained":{boxShadow:"0px 2px 1px -1px rgba(0,0,0,0.2),0px 1px 1px 0px rgba(0,0,0,0.14),0px 1px 3px 0px rgba(0,0,0,0.12)"},"& button.enactive-contained::before":{opacity:.07},"& button.enactive-contained:active::before, & button.enactive-contained:hover::before, & button.enactive-contained:focus::before":{opacity:0}},O=Object(h.a)("div")((function(e){var t,n=e.theme;return Object(m.a)(Object(m.a)(Object(m.a)({},x),(t={theme:n},Object(m.a)(Object(m.a)(Object(m.a)({},j),g),function(e){var t=e.theme;return{"& button.enactive-primary":{color:t.palette.primary.contrastText},"& button.enactive-primary::before":{background:t.palette.primary.main,opacity:1},"& button.enactive-primary:active::before, & button.enactive-primary:hover::before, & button.enactive-primary:focus::before":{opacity:.85}}}(t)))),{},{"& p":Object(m.a)(Object(m.a)({},x),{},{lineHeight:1.4,margin:0})})})),y=n(192),w=n(1),E=Object(h.a)("div")({"&, &.enter, &.exit.exit-active, &.exit-done":{opacity:0,pointerEvents:"none"},"&.enter-active, &.exit-active":{transition:"opacity 250ms linear"},"&.enter.enter-active, &.enter-done, &.exit":{opacity:1,pointerEvents:"auto"},borderColor:"rgba(0, 0, 0, 0.7)",borderStyle:"solid",bottom:0,left:0,position:"fixed",right:0,top:0,zIndex:1111}),S=function(e){var t=e.active,n=e.children,o=e.onOutEnd,r=void 0===o?function(){}:o,i=e.ref,c=e.style,u=a.a.useRef(null);return Object(w.jsx)(y.a,{in:t,nodeRef:u,onExited:r,timeout:250,children:Object(w.jsx)(E,{ref:function(e){u.current=e,null===i||void 0===i||i(e)},style:c,children:n})})},C=Object(h.a)("div")({display:"flex"}),R=Object(h.a)(C)({alignItems:"stretch",flexDirection:"column",justifyContent:"flex-start"}),k=Object(h.a)(C)({alignItems:"center",justifyContent:"center"}),I=Object(h.a)("div")({flex:1}),A=(Object(h.a)("div")({}),n(75)),T=n(189),L=["anchorEl","children","offset","open","placement"],W=function(e){var t=e.anchorEl,n=e.children,o=e.offset,r=void 0===o?0:o,i=e.open,c=e.placement,u=Object(A.a)(e,L),l=a.a.useState(null),d=Object(s.a)(l,2),v=d[0],p=d[1],b=Object(T.a)(t,v,{modifiers:[{name:"offset",options:{offset:[0,r]}}],placement:c}),f=b.attributes,h=b.styles;return Object(w.jsx)("div",Object(m.a)(Object(m.a)(Object(m.a)({ref:p},u),{},{style:Object(m.a)(Object(m.a)(Object(m.a)({},u.style),h.popper),i?void 0:{pointerEvents:"none",visibility:"hidden"})},f.popper),{},{children:n}))},q=Object(h.a)(I)({maxWidth:"25em",minWidth:"20em",padding:"1em"}),P=Object(h.a)(k)({"& > button":{margin:"0.25em"},justifyContent:"flex-end",margin:"-0.25em",padding:"1em"}),D=Object(h.a)("div")({bottom:"2em",height:"auto",maxWidth:"35em",position:"fixed",right:"2em"}),H=Object(h.a)(R)({backgroundColor:"white",borderRadius:"1em",position:"relative"}),N=Object(h.a)("div")({"&, &.enter, &.exit.exit-active, &.exit-done":{opacity:0,top:"2em"},"&.enter-active, &.exit-active":{transition:"opacity 250ms ease-in, top 250ms ease-in"},"&.enter.enter-active, &.enter-done, &.exit":{opacity:1,top:0},'[data-popper-placement="bottom"] &::before':{left:"calc(50% - 0.5em)",top:"-0.5em"},'[data-popper-placement="left"] &::before':{right:"-0.5em",top:"calc(50% - 0.5em)"},'[data-popper-placement="right"] &::before':{left:"-0.5em",top:"calc(50% - 0.5em)"},'[data-popper-placement="top"] &::before':{bottom:"-0.5em",left:"calc(50% - 0.5em)"},"[data-popper-placement] &::before":{backgroundColor:"white",boxShadow:"0px 3px 5px -1px rgba(0, 0, 0, 0.2), 0px 5px 8px 0px rgba(0, 0, 0, 0.14), 0px 1px 14px 0px rgba(0, 0, 0, 0.12)",content:'""',display:"block",height:"1em",position:"absolute",transform:"rotate(45deg)",width:"1em"},borderRadius:"1em",boxShadow:"0px 3px 5px -1px rgba(0, 0, 0, 0.2), 0px 5px 8px 0px rgba(0, 0, 0, 0.14), 0px 1px 14px 0px rgba(0, 0, 0, 0.12)",position:"relative"}),U=function(e){var t=e.anchorEl,n=e.buttons,o=void 0===n?[]:n,r=e.children,i=e.onOutEnd,c=void 0===i?function(){}:i,u=e.open,l=a.a.useRef(null),d=a.a.useState(u),v=Object(s.a)(d,2),p=v[0],b=v[1],f=a.a.useState(!1),h=Object(s.a)(f,2),x=h[0],j=h[1];return a.a.useEffect((function(){!u||p||x?x&&(b(!1),j(!1)):b(!0)}),[u,p,x]),void 0!==t?Object(w.jsx)(W,{anchorEl:t,offset:12,open:p,placement:"auto",style:{zIndex:1112},children:Object(w.jsx)(y.a,{in:u,nodeRef:l,onExited:function(){j(!0),c()},timeout:250,children:Object(w.jsx)(N,{ref:l,children:Object(w.jsxs)(H,{children:[Object(w.jsx)(q,{children:r}),o.length>0?Object(w.jsx)(P,{children:o}):void 0]})})})}):Object(w.jsx)(D,{style:Object(m.a)({zIndex:1112},u?void 0:{pointerEvents:"none"}),children:Object(w.jsx)(y.a,{in:u,nodeRef:l,onExited:function(){j(!0),c()},timeout:250,children:Object(w.jsx)(N,{ref:l,children:Object(w.jsxs)(H,{children:[Object(w.jsx)(q,{children:r}),o.length>0?Object(w.jsx)(P,{children:o}):void 0]})})})})},z=function(e){var t=e.active,n=e.buttons,o=e.html,a=e.onAction,r=e.onOut,i=void 0===r?function(){}:r,c=e.targetEl;return Object(w.jsx)(U,{anchorEl:c,buttons:n.map((function(e){return[Object(w.jsx)("button",{className:"".concat("next"===e.action?"enactive-primary":""),onClick:function(){return a(e.action)},children:e.text},e.action)]})),onOutEnd:i,open:t,children:Object(w.jsx)("div",{dangerouslySetInnerHTML:{__html:o}})})},F=function(e){var t=e.onAction,n=e.onComplete,o=e.tour,r=a.a.useState(-1),i=Object(s.a)(r,2),c=i[0],u=i[1],l=a.a.useState(),d=Object(s.a)(l,2),v=d[0],p=d[1],b=a.a.useState(window.scrollY),f=Object(s.a)(b,2)[1],m=a.a.useMemo((function(){return o.map((function(e){var t;return{step:e,targetEl:null!==(t=function(){var t;switch(null===(t=e.selector)||void 0===t?void 0:t.type){case"css":return document.querySelector(e.selector.value);case"xpath":return document.evaluate(e.selector.value,document,null,XPathResult.FIRST_ORDERED_NODE_TYPE,null).singleNodeValue;case void 0:return null}}())&&void 0!==t?t:void 0}}))}),[o]);return a.a.useEffect((function(){setTimeout((function(){return u(0)}),1e3);var e=function(){return f(window.scrollY)};return window.addEventListener("scroll",e),function(){return window.removeEventListener("scroll",e)}}),[]),Object(w.jsx)(w.Fragment,{children:m.map((function(e,a){var r,i=e.step,l=e.targetEl;return Object(w.jsxs)("div",{children:[i.mask?Object(w.jsx)(S,{active:-1!==v&&(c===a&&void 0===v||v===a),style:function(){var e,t,n,o,a=null===l||void 0===l?void 0:l.getBoundingClientRect(),r=null!==(e=null===a||void 0===a?void 0:a.x)&&void 0!==e?e:0,i=null!==(t=null===a||void 0===a?void 0:a.y)&&void 0!==t?t:0,c=null!==(n=null===a||void 0===a?void 0:a.width)&&void 0!==n?n:0,u=null!==(o=null===a||void 0===a?void 0:a.height)&&void 0!==o?o:0;return{borderBottomWidth:"calc(100vh - ".concat(i+u,"px)"),borderLeftWidth:null===a||void 0===a?void 0:a.x,borderRightWidth:"calc(100vw - ".concat(r+c,"px)"),borderTopWidth:null===a||void 0===a?void 0:a.y}}()},"mask-".concat(a)):void 0,Object(w.jsx)(z,{active:void 0===v&&c===a,buttons:null!==(r=i.buttons)&&void 0!==r?r:[{action:"dismiss",text:"Dismiss"},a<o.length-1?{action:"next",text:"Next"}:void 0].filter((function(e){return void 0!==e})),html:i.html,onAction:function(e){switch(t(i.id,a,e),e){case"dismiss":return p(-1);case"next":return p(a+1)}},onOut:function(){-1===v?n():void 0!==v&&(u(v),p(void 0))},targetEl:l},"popup-".concat(a))]},a)}))})},M=n(24),_=n(72),J=n.n(_),B=n(37),Y=n.n(B),$=n(193);function V(e){var t,n={},o=Object(M.a)(e);try{for(o.s();!(t=o.n()).done;){var a,r=Object(s.a)(t.value,2),i=r[0],c=r[1],u=X(i),l=Object(s.a)(u,2),d=l[0],v=l[1],p=n,b=Object(M.a)(d);try{for(b.s();!(a=b.n()).done;){var f=a.value;f in p&&"object"!==typeof p[f]&&console.warn("Assigned both a value and an object on enactive script tag metadata",{key:i,value:p[f]}),p=f in p?p[f]:p[f]={}}}catch(m){b.e(m)}finally{b.f()}v in p&&console.warn("Assigned duplicate values on enactive script tag metadata",{key:i,value:c}),p[v]=c}}catch(m){o.e(m)}finally{o.f()}return n}function X(e){var t,n,o=(n=e,n.replaceAll(/^\.+|\.+$/g,"").replaceAll(/\.+/g,".").split(".")).map(G),a=null!==(t=o.pop())&&void 0!==t?t:"";return[o,a]}function G(e){return e.replaceAll(/^-+|-+$/g,"").replaceAll(/-+/g,"-").split("-").map((function(e,t){return t>0&&e.length>0?"".concat(e[0].toUpperCase()).concat(e.slice(1).toLowerCase()):e.toLowerCase()})).join("")}function K(e,t,n){void 0!==e[t]&&null!==e[t]||(e[t]=n)}function Q(e,t,n){var o=a.a.useState((function(){if(void 0!==t)switch(typeof t){case"string":case"number":case"boolean":return t;default:return}})),r=Object(s.a)(o,2),i=r[0],c=r[1];return function(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).interval,n=void 0===t?250:t;a.a.useEffect((function(){var t=setInterval(e,n);return function(){return clearInterval(t)}}),[n])}((function(){return c(e())}),{interval:"object"===typeof t?t.interval:"object"===typeof n?n.interval:void 0}),i}var Z=window,ee=window;var te=new J.a({coerceTypes:!0}).compile({properties:{apiHost:{type:"string"},context:{nullable:!0,properties:{device:{nullable:!0,properties:{locale:{nullable:!0,type:"string"}},type:"object"},page:{nullable:!0,properties:{locale:{nullable:!0,type:"string"},url:{nullable:!0,type:"string"}},type:"object"},user:{nullable:!0,properties:{anonymous:{nullable:!0,type:"boolean"},id:{nullable:!0,type:"string"},locale:{nullable:!0,type:"string"}},type:"object"}},type:"object"},enabled:{type:"boolean"},siteId:{type:"string"}},required:["apiHost","enabled","siteId"],type:"object"}),ne="script[enactive\\.site-id]",oe=new URLSearchParams(window.location.search).has("enactiveDebug"),ae=function(){var e=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.interval,n=void 0===t?250:t,o=e.window,a=void 0===o?Z:o;return Q((function(){return a.location.href}),a.location.href,{interval:n})}(),t=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.interval,n=void 0===t?250:t,o=e.window,r=void 0===o?ee:o,i=Q((function(){return r.location.search}),r.location.search,{interval:n}),c=a.a.useState((function(){return new URLSearchParams(i)})),u=Object(s.a)(c,2),l=u[0],d=u[1];return a.a.useEffect((function(){return d(new URLSearchParams(i))}),[i]),l}(),n=a.a.useState(),o=Object(s.a)(n,2),r=o[0],i=o[1],c=a.a.useState(),u=Object(s.a)(c,2),l=u[0],d=u[1],v=a.a.useState(),p=Object(s.a)(v,2),b=p[0],f=p[1],m=a.a.useState(),h=Object(s.a)(m,2),x=h[0],j=h[1],g=a.a.useState(),O=Object(s.a)(g,2),y=O[0],w=O[1];return a.a.useEffect((function(){var e=document.querySelector(ne);null===e?console.warn("Could not locate enactive script on page",{selector:ne}):i(e);var t=function(){try{var e,t;return null!==(e=JSON.parse(null!==(t=localStorage.getItem("enactive-context"))&&void 0!==t?t:"null"))&&void 0!==e?e:void 0}catch(n){return}}();if(void 0===t){var n={user:{anonymous:!0,id:Object($.a)()}};f(n);try{localStorage.setItem("enactive-context",JSON.stringify(n))}catch(o){console.warn("Failed to set enactive device data in local storage.",o)}}else f(t)}),[]),a.a.useEffect((function(){if(ie("metadata update triggered from script reference or query string change",(function(){return{qs:t,script:r}})),d(re(r,t)),void 0!==r){var e=new MutationObserver((function(){ie("metadata update triggered from script property change"),d(re(r,t))}));return e.observe(r,{attributes:!0}),function(){return e.disconnect()}}}),[t,r]),a.a.useEffect((function(){return j(function(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).selector,n=void 0===t?"":t;if(void 0!==e){var o,a,r=V(new URLSearchParams(e).entries());return ie("decoded raw metadata from attributes",(function(){return{data:e,result:r}})),te(r)?(void 0!==(null===(o=r.context)||void 0===o||null===(a=o.user)||void 0===a?void 0:a.id)&&K(r.context.user,"anonymous",!1),ie("decoded coerced metadata from attributes",(function(){return{data:e,result:r}})),r):void console.warn("Invalid enactive script tag metadata",{errors:te.errors,result:r,selector:n})}return}(l,{selector:ne}))}),[l]),a.a.useEffect((function(){var t=void 0!==b&&void 0!==x?Y()({},{context:{page:{url:e}}},{context:b},x):void 0;w(t),ie("metadata updated",(function(){return{metadata:t}}))}),[e,x,b]),y};function re(e,t){if(void 0!==e){var n=new URLSearchParams;ie("encoding script attributes",(function(){return{script:e}}));var o,a=Object(M.a)(e.attributes);try{for(a.s();!(o=a.n()).done;){var r=o.value;!0===r.name.startsWith("enactive.")&&n.append(r.name.substring(9),r.value)}}catch(p){a.e(p)}finally{a.f()}ie("encoding querystring attributes",(function(){return{qs:t.toString()}}));var i,c=Object(M.a)(t.entries());try{for(c.s();!(i=c.n()).done;){var u=Object(s.a)(i.value,2),l=u[0],d=u[1];!0===l.startsWith("enactive.")&&n.set(l.substring(9),d)}}catch(p){c.e(p)}finally{c.f()}if(!1===n.has("api-host")){var v=document.createElement("a");v.href=e.src,n.append("api-host","api.".concat(v.hostname.replace("www.","")))}return!1===n.has("enabled")&&n.append("enabled","true"),n.sort(),ie("encoding final attributes",(function(){return{attributes:t.toString()}})),n.toString()}}function ie(e,t){!0===oe&&console.debug("[enactive] ".concat(e),null===t||void 0===t?void 0:t())}var ce=n(73),ue=n(74),le=function(){function e(t){Object(ce.a)(this,e),this.axios=t}return Object(ue.a)(e,[{key:"getTour",value:function(){var e=Object(l.a)(u.a.mark((function e(t){var n,o,a,r,i,c,l;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i={context:this.resolveEventContext(t)},e.next=3,this.axios.post("tours",i);case 3:return c=e.sent,l={palette:{primary:{contrastText:null!==(n=null===(o=c.data.site.theme)||void 0===o?void 0:o.primaryContrastText)&&void 0!==n?n:"#fff",main:null!==(a=null===(r=c.data.site.theme)||void 0===r?void 0:r.primaryColor)&&void 0!==a?a:"#4f4f4f"}}},e.abrupt("return",{theme:l,tour:c.data.tours[0]});case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"collectTourAction",value:function(){var e=Object(l.a)(u.a.mark((function e(t,n,o,a){var r,i;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=this.resolveEventContext(t),i={context:r},e.next=4,this.axios.post("tours/".concat(n,"/steps/").concat(o,"/actions/").concat(a),i);case 4:case"end":return e.stop()}}),e,this)})));return function(t,n,o,a){return e.apply(this,arguments)}}()},{key:"resolveEventContext",value:function(e){var t,n;return Y()({device:{locale:null!==(t=null===(n=document.querySelector("html"))||void 0===n?void 0:n.getAttribute("lang"))&&void 0!==t?t:void 0},page:{url:window.location.href},user:{anonymous:!0,id:""}},e)}}]),e}(),se=Object(d.a)({productionPrefix:"enactive"}),de=function(){var e=ae(),t=a.a.useMemo((function(){if(void 0!==e){var t=f.a.create({baseURL:"https://".concat(e.apiHost,"/api/sites/").concat(e.siteId)});return new le(t)}}),[e]),n=a.a.useState(),o=Object(s.a)(n,2),r=o[0],i=o[1],c=a.a.useState(),d=Object(s.a)(c,2),b=d[0],m=d[1];return a.a.useEffect((function(){!0===(null===e||void 0===e?void 0:e.enabled)&&Object(l.a)(u.a.mark((function n(){var o;return u.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,null===t||void 0===t?void 0:t.getTour(null===e||void 0===e?void 0:e.context);case 2:void 0!==(o=n.sent)?(m(o.theme),i(o.tour)):(i(void 0),m(void 0));case 4:case"end":return n.stop()}}),n)})))()}),[e,t]),Object(w.jsx)(v.b,{generateClassName:se,children:void 0!==b&&void 0!==r?Object(w.jsx)(p.a,{theme:b,children:Object(w.jsx)(O,{children:Object(w.jsx)(F,{onAction:function(n,o,a){return null===t||void 0===t?void 0:t.collectTourAction(null===e||void 0===e?void 0:e.context,r.id,n,a)},onComplete:function(){return i(void 0)},tour:r.steps})})}):Object(w.jsx)(w.Fragment,{})})};n(169);i.a.render(Object(w.jsx)(a.a.StrictMode,{children:Object(w.jsx)(de,{})}),document.getElementById("enactive-app-root"))}},[[170,1,2]]]);
//# sourceMappingURL=main.f7b5d884.chunk.js.map