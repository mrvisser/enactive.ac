(this["webpackJsonpenactive-integration-ui"]=this["webpackJsonpenactive-integration-ui"]||[]).push([[0],{167:function(e,t,n){"use strict";n.r(t);var o=n(0),i=n.n(o),a=n(21),r=n.n(a),c=n(7),l=n(187),s=n(183),u=n(65),d=n.n(u),p=n(6),b=n(184),v={contrastText:"#fff",main:"#8d4a99"},f=Object(p.a)(Object(p.a)({},{color:"rgba(0, 0, 0, 0.87)"}),{fontFamily:'"Roboto", "Helvetica", "Arial", sans-serif',fontSize:16}),x={"& button":Object(p.a)(Object(p.a)(Object(p.a)({},f),{alignContent:"center",alignItems:"center",borderRadius:"0.4em",cursor:"pointer",display:"inline-flex",flexDirection:"row",justifyContent:"center",lineHeight:"1.5em",minWidth:"5em",overflow:"hidden",padding:"0.6em 0.8em",position:"relative",transition:"background 100ms linear",zIndex:1}),{},{background:"rgba(0, 0, 0, 0)",border:"none"}),"& button::before":{background:"#000",bottom:0,content:'""',left:0,opacity:0,position:"absolute",right:0,top:0,zIndex:-1},"& button:active::before, & button:hover::before, & button:focus::before":{opacity:.07},"& button:disabled":{cursor:"default",opacity:.5,pointerEvents:"none"}},j={"& button.nctv-primary":{color:v.contrastText},"& button.nctv-primary::before":{background:v.main,opacity:1},"& button.nctv-primary:active::before, & button.nctv-primary:hover::before, & button.nctv-primary:focus::before":{opacity:.85}},m=Object(p.a)(Object(p.a)(Object(p.a)({},x),{"& button.nctv-contained":{boxShadow:"0px 2px 1px -1px rgba(0,0,0,0.2),0px 1px 1px 0px rgba(0,0,0,0.14),0px 1px 3px 0px rgba(0,0,0,0.12)"},"& button.nctv-contained::before":{opacity:.07},"& button.nctv-contained:active::before, & button.nctv-contained:hover::before, & button.nctv-contained:focus::before":{opacity:0}}),j),h=Object(b.a)("div")(Object(p.a)(Object(p.a)(Object(p.a)({},f),m),{},{"& p":Object(p.a)(Object(p.a)({},f),{},{margin:"1em 0"})})),O=n(185),g=n(1),y=Object(b.a)("div")({"&, &.enter, &.exit.exit-active, &.exit-done":{opacity:0},"&.enter-active, &.exit-active":{transition:"opacity 250ms linear"},"&.enter.enter-active, &.enter-done, &.exit":{opacity:1},borderColor:"rgba(0, 0, 0, 0.7)",borderStyle:"solid",bottom:0,left:0,position:"fixed",right:0,top:0,zIndex:1111}),w=function(e){var t=e.active,n=e.children,o=e.onOutEnd,a=void 0===o?function(){}:o,r=e.ref,l=e.style,s=i.a.useRef(null),u=i.a.useState(t),d=Object(c.a)(u,2),b=d[0],v=d[1],f=i.a.useState(!1),x=Object(c.a)(f,2),j=x[0],m=x[1];return i.a.useEffect((function(){!t||b||j?j&&(v(!1),m(!1)):v(!0)}),[t,b,j]),Object(g.jsx)(O.a,{in:t,onExited:a,nodeRef:s,timeout:250,children:Object(g.jsx)(y,{ref:function(e){s.current=e,null===r||void 0===r||r(e)},style:Object(p.a)(Object(p.a)({},l),b?void 0:{pointerEvents:"none",visibility:"hidden"}),children:n})})},E=Object(b.a)("div")({display:"flex"}),S=Object(b.a)(E)({alignItems:"stretch",flexDirection:"column",justifyContent:"flex-start"}),C=Object(b.a)(E)({alignItems:"center",justifyContent:"center"}),R=Object(b.a)("div")({flex:1}),I=(Object(b.a)("div")({}),n(72)),k=n(182),T=function(e){var t=e.anchorEl,n=e.children,o=e.offset,a=void 0===o?0:o,r=e.open,l=e.placement,s=Object(I.a)(e,["anchorEl","children","offset","open","placement"]),u=i.a.useState(null),d=Object(c.a)(u,2),b=d[0],v=d[1],f=Object(k.a)(t,b,{modifiers:[{name:"offset",options:{offset:[0,a]}}],placement:l}),x=f.attributes,j=f.styles;return Object(g.jsx)("div",Object(p.a)(Object(p.a)(Object(p.a)({ref:v},s),{},{style:Object(p.a)(Object(p.a)(Object(p.a)({},s.style),j.popper),r?void 0:{pointerEvents:"none",visibility:"hidden"})},x.popper),{},{children:n}))},N=Object(b.a)(R)({fontSize:"1.2em",padding:"1em"}),D=Object(b.a)(C)({"& > *":{marginLeft:"1em"},justifyContent:"flex-end",padding:"1em"}),L=Object(b.a)("div")({bottom:"2em",height:"auto",maxWidth:"35em",position:"fixed",right:"2em"}),A=Object(b.a)(S)({backgroundColor:"white",borderRadius:"1em",position:"relative"}),W=Object(b.a)("div")({"&, &.enter, &.exit.exit-active, &.exit-done":{opacity:0,top:"2em"},"&.enter-active, &.exit-active":{transition:"opacity 250ms ease-in, top 250ms ease-in"},"&.enter.enter-active, &.enter-done, &.exit":{opacity:1,top:0},'[data-popper-placement="bottom"] &::before':{left:"calc(50% - 0.5em)",top:"-0.5em"},'[data-popper-placement="left"] &::before':{right:"-0.5em",top:"calc(50% - 0.5em)"},'[data-popper-placement="right"] &::before':{left:"-0.5em",top:"calc(50% - 0.5em)"},'[data-popper-placement="top"] &::before':{bottom:"-0.5em",left:"calc(50% - 0.5em)"},"[data-popper-placement] &::before":{backgroundColor:"white",boxShadow:"0px 3px 5px -1px rgba(0, 0, 0, 0.2), 0px 5px 8px 0px rgba(0, 0, 0, 0.14), 0px 1px 14px 0px rgba(0, 0, 0, 0.12)",content:'""',display:"block",height:"1em",position:"absolute",transform:"rotate(45deg)",width:"1em"},borderRadius:"1em",boxShadow:"0px 3px 5px -1px rgba(0, 0, 0, 0.2), 0px 5px 8px 0px rgba(0, 0, 0, 0.14), 0px 1px 14px 0px rgba(0, 0, 0, 0.12)",position:"relative"}),z=function(e){var t=e.anchorEl,n=e.buttons,o=void 0===n?[]:n,a=e.children,r=e.onOutEnd,l=void 0===r?function(){}:r,s=e.open,u=i.a.useRef(null),d=i.a.useState(s),b=Object(c.a)(d,2),v=b[0],f=b[1],x=i.a.useState(!1),j=Object(c.a)(x,2),m=j[0],h=j[1];return i.a.useEffect((function(){!s||v||m?m&&(f(!1),h(!1)):f(!0)}),[s,v,m]),void 0!==t?Object(g.jsx)(T,{anchorEl:t,offset:12,open:v,placement:"right",style:{maxWidth:"35em",zIndex:1112},children:Object(g.jsx)(O.a,{onExited:function(){h(!0),l()},in:s,nodeRef:u,timeout:250,children:Object(g.jsx)(W,{ref:u,children:Object(g.jsxs)(A,{children:[Object(g.jsx)(N,{children:a}),o.length>0?Object(g.jsx)(D,{children:o}):void 0]})})})}):Object(g.jsx)(L,{style:Object(p.a)({zIndex:1112},s?void 0:{pointerEvents:"none"}),children:Object(g.jsx)(O.a,{onExited:function(){h(!0),l()},in:s,nodeRef:u,timeout:250,children:Object(g.jsx)(W,{ref:u,children:Object(g.jsxs)(A,{children:[Object(g.jsx)(N,{children:a}),o.length>0?Object(g.jsx)(D,{children:o}):void 0]})})})})},M=function(e){var t=e.active,n=e.buttonDismissText,o=void 0===n?"Dismiss":n,i=e.buttonNextText,a=void 0===i?"Next":i,r=e.html,c=e.onDismiss,l=void 0===c?function(){}:c,s=e.onNext,u=e.onOut,d=void 0===u?function(){}:u,p=e.targetEl;return Object(g.jsx)(z,{anchorEl:p,buttons:[Object(g.jsx)("button",{onClick:function(){return l()},children:o},"dismiss"),void 0!==s?Object(g.jsx)("button",{className:"nctv-primary",onClick:s,children:a},"next"):void 0].filter((function(e){return void 0!==e})),open:t,onOutEnd:d,children:Object(g.jsx)("div",{dangerouslySetInnerHTML:{__html:r}})})},B=function(e){var t=e.onComplete,n=e.tour,o=i.a.useState(-1),a=Object(c.a)(o,2),r=a[0],l=a[1],s=i.a.useState(),u=Object(c.a)(s,2),d=u[0],p=u[1],b=i.a.useState(window.scrollY),v=Object(c.a)(b,2)[1],f=i.a.useMemo((function(){return n.map((function(e){var t;return{step:e,targetEl:null!==(t=function(){var t;switch(null===(t=e.selector)||void 0===t?void 0:t.type){case"css":return document.querySelector(e.selector.value);case"xpath":return document.evaluate(e.selector.value,document,null,XPathResult.FIRST_ORDERED_NODE_TYPE,null).singleNodeValue;case void 0:return null}}())&&void 0!==t?t:void 0}}))}),[n]);return i.a.useEffect((function(){setTimeout((function(){return l(0)}),1e3);var e=function(){return v(window.scrollY)};return window.addEventListener("scroll",e),function(){return window.removeEventListener("scroll",e)}}),[]),Object(g.jsx)(g.Fragment,{children:f.map((function(e,o){var i,a,c,s,u=e.step,b=e.targetEl;return Object(g.jsxs)("div",{children:[u.mask?Object(g.jsx)(w,{active:-1!==d&&(r===o&&void 0===d||d===o),style:function(){var e,t,n,o,i=null===b||void 0===b?void 0:b.getBoundingClientRect(),a=null!==(e=null===i||void 0===i?void 0:i.x)&&void 0!==e?e:0,r=null!==(t=null===i||void 0===i?void 0:i.y)&&void 0!==t?t:0,c=null!==(n=null===i||void 0===i?void 0:i.width)&&void 0!==n?n:0,l=null!==(o=null===i||void 0===i?void 0:i.height)&&void 0!==o?o:0;return{borderBottomWidth:"calc(100vh - ".concat(r+l,"px)"),borderLeftWidth:null===b||void 0===b?void 0:b.getBoundingClientRect().x,borderRightWidth:"calc(100vw - ".concat(a+c,"px)"),borderTopWidth:null===b||void 0===b?void 0:b.getBoundingClientRect().y}}()},"mask-".concat(o)):void 0,Object(g.jsx)(M,{active:void 0===d&&r===o,buttonDismissText:null===(i=u.buttons)||void 0===i||null===(a=i.find((function(e){return"dismiss"===e.action})))||void 0===a?void 0:a.text,buttonNextText:null===(c=u.buttons)||void 0===c||null===(s=c.find((function(e){return"next"===e.action})))||void 0===s?void 0:s.text,html:u.html,onDismiss:function(){return p(-1)},onOut:function(){-1===d?t(o):void 0!==d&&(l(d),p(void 0))},onNext:o<n.length-1?function(){return p(o+1)}:void 0,targetEl:b},"popup-".concat(o))]},o)}))})},F=n(35),H=n(68),P=n.n(H),_=n(33),J=n.n(_),U=n(186),q=(new P.a).compile({properties:{apiHost:{type:"string"},context:{nullable:!0,properties:{device:{nullable:!0,properties:{locale:{nullable:!0,type:"string"}},type:"object"},page:{nullable:!0,properties:{locale:{nullable:!0,type:"string"},url:{nullable:!0,type:"string"}},type:"object"},user:{nullable:!0,properties:{anonymous:{nullable:!0,type:"boolean"},id:{nullable:!0,type:"string"},locale:{nullable:!0,type:"string"}},type:"object"}},type:"object"},siteId:{type:"string"}},type:"object"}),Y="script[enactive\\.site-id]",$=function(){var e=i.a.useMemo((function(){var e;return null!==(e=document.querySelector(Y))&&void 0!==e?e:void 0}),[]),t=i.a.useMemo((function(){return function(e){if(void 0!==e){var t,n=new URLSearchParams,o=Object(F.a)(e.attributes);try{for(o.s();!(t=o.n()).done;){var i=t.value;!0===i.name.startsWith("enactive.")&&n.append(i.name.substring(9),i.value)}}catch(r){o.e(r)}finally{o.f()}if(!1===n.has("api-host")){var a=document.createElement("a");a.href=e.src,n.append("api-host","api.".concat(a.hostname.replace("www.","")))}return n.sort(),n.toString()}return""}(e)}),[e]),n=i.a.useState(),o=Object(c.a)(n,2),a=o[0],r=o[1],l=i.a.useState(),s=Object(c.a)(l,2),u=s[0],d=s[1],p=i.a.useState(),b=Object(c.a)(p,2),v=b[0],f=b[1];return i.a.useEffect((function(){var e=function(){try{var e,t;return null!==(e=JSON.parse(null!==(t=localStorage.getItem("enactive-context"))&&void 0!==t?t:"null"))&&void 0!==e?e:void 0}catch(n){}}();if(void 0===e){var t={user:{anonymous:!0,id:Object(U.a)()}};r(t);try{localStorage.setItem("enactive-context",JSON.stringify(t))}catch(n){console.warn("Failed to set enactive device data in storage.",n)}}else r(e)}),[]),i.a.useEffect((function(){return d(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.selector,o=void 0===n?"":n,i=t.script,a=void 0===i?void 0:i;if(void 0===e)return void console.warn("Could not locate enactive script tag with metadata",{script:a,selector:o});var r,l={},s=new URLSearchParams(e).entries(),u=Object(F.a)(s);try{for(u.s();!(r=u.n()).done;){var d,p=Object(c.a)(r.value,2),b=p[0],v=p[1],f=V(b),x=Object(c.a)(f,2),j=x[0],m=x[1],h=l,O=Object(F.a)(j);try{for(O.s();!(d=O.n()).done;){var g=d.value;g in h&&"object"!==typeof h[g]&&console.warn("Assigned both a value and an object on enactive script tag metadata",{script:a,selector:o}),h=g in h?h[g]:h[g]={}}}catch(C){O.e(C)}finally{O.f()}m in h&&console.warn("Assigned duplicate values on enactive script tag metadata",{script:a,selector:o}),h[m]=v}}catch(C){u.e(C)}finally{u.f()}if(q(l)){var y,w,E,S;if(void 0!==(null===(y=l.context)||void 0===y||null===(w=y.user)||void 0===w?void 0:w.id))null!==(S=(E=l.context.user).anonymous)&&void 0!==S||(E.anonymous=!1);return l}console.warn("Invalid enactive script tag metadata",{errors:q.errors,result:l,script:a,selector:o})}(t,{script:e,selector:Y}))}),[t,e]),i.a.useEffect((function(){f(void 0!==a&&void 0!==u?J()({},{context:a},u):void 0)}),[u,a]),i.a.useEffect((function(){console.log({localStorageContext:a,metadata:v,scriptMetadata:u})}),[a,v,u]),v};function V(e){var t,n,o=(n=e,n.replaceAll(/^\.+|\.+$/g,"").replaceAll(/\.+/g,".").split(".")).map(X),i=null!==(t=o.pop())&&void 0!==t?t:"";return[o,i]}function X(e){return e.replaceAll(/^-+|-+$/g,"").replaceAll(/-+/g,"-").split("-").map((function(e,t){return t>0&&e.length>0?"".concat(e[0].toUpperCase()).concat(e.slice(1).toLowerCase()):e.toLowerCase()})).join("")}var G=n(32),K=n.n(G),Q=n(69),Z=n(70),ee=n(71),te=function(){function e(t){Object(Z.a)(this,e),this.axios=t}return Object(ee.a)(e,[{key:"getTour",value:function(){var e=Object(Q.a)(K.a.mark((function e(){var t,n,o,i,a,r=arguments;return K.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=r.length>0&&void 0!==r[0]?r[0]:{},i={context:J()({device:{locale:null!==(t=null===(n=document.querySelector("html"))||void 0===n?void 0:n.getAttribute("lang"))&&void 0!==t?t:void 0},page:{url:window.location.href},user:{anonymous:!0,id:""}},o)},e.next=4,this.axios.post("tours",i);case 4:return a=e.sent,e.abrupt("return",a.data.tours[0]);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),ne=Object(l.a)({productionPrefix:"enactive"}),oe=function(){var e=$(),t=i.a.useMemo((function(){if(void 0!==e){var t=d.a.create({baseURL:"https://".concat(e.apiHost,"/api/v1/sites/").concat(e.siteId)});return new te(t)}}),[e]),n=i.a.useState(),o=Object(c.a)(n,2),a=o[0],r=o[1];return i.a.useEffect((function(){void 0!==t&&t.getTour().then((function(e){return r(null===e||void 0===e?void 0:e.steps)}))}),[t]),Object(g.jsx)(s.b,{generateClassName:ne,children:Object(g.jsx)(h,{children:void 0!==a?Object(g.jsx)(B,{onComplete:function(){return r(void 0)},tour:a}):Object(g.jsx)(g.Fragment,{})})})};n(166);r.a.render(Object(g.jsx)(i.a.StrictMode,{children:Object(g.jsx)(oe,{})}),document.getElementById("enactive-app-root"))}},[[167,1,2]]]);
//# sourceMappingURL=main.feb21845.chunk.js.map