{"version":3,"sources":["components/theme/base.ts","components/theme/button.ts","components/ThemeContainer.tsx","components/Mask.tsx","components/Flex.tsx","components/Popper.tsx","components/Popup.tsx","components/TourStepPopup.tsx","components/TourSequence.tsx","hooks/useEnactiveMetadata.ts","services/TourService.ts","App.tsx","index.tsx"],"names":["palette","contrastText","main","base","color","fontFamily","fontSize","buttonBase","alignContent","alignItems","borderRadius","cursor","display","flexDirection","justifyContent","lineHeight","minWidth","overflow","padding","position","transition","zIndex","background","border","bottom","content","left","opacity","right","top","pointerEvents","buttonPrimary","button","boxShadow","ThemeContainer","styled","margin","MaskInner","borderColor","borderStyle","Mask","active","children","onOutEnd","ref","style","maskRef","React","useRef","useState","maskActive","setMaskActive","maskClosed","setMaskClosed","useEffect","CSSTransition","in","onExited","nodeRef","timeout","el","current","undefined","visibility","Flex","FlexColumn","FlexRow","FlexContent","flex","Popper","anchorEl","offset","open","placement","divProps","popperEl","setPopperEl","usePopper","modifiers","name","options","attributes","styles","popper","Content","Buttons","marginLeft","Systray","height","maxWidth","Inner","backgroundColor","TransitionSlideFade","transform","width","Popup","buttons","transitionRef","popperActive","setPopperActive","popperClosed","setPopperClosed","length","TourStepPopup","buttonDismissText","buttonNextText","html","onDismiss","onNext","onOut","targetEl","onClick","className","filter","b","dangerouslySetInnerHTML","__html","TourSequence","onComplete","tour","stepIndex","setStepIndex","nextStepIndex","setNextStepIndex","window","scrollY","setScrollYPosition","stepInfos","useMemo","map","step","selector","type","document","querySelector","value","evaluate","XPathResult","FIRST_ORDERED_NODE_TYPE","singleNodeValue","setTimeout","handler","addEventListener","removeEventListener","i","mask","rect","getBoundingClientRect","x","y","borderBottomWidth","borderLeftWidth","borderRightWidth","borderTopWidth","find","action","text","compiled","Ajv","compile","properties","apiHost","context","nullable","device","locale","page","url","user","anonymous","id","siteId","useEnactiveMetadata","script","scriptData","params","URLSearchParams","attr","startsWith","append","substring","has","a","createElement","href","src","hostname","replace","sort","toString","encodeScriptDataFromAttributes","localStorageContext","setLocalStorageContext","scriptMetadata","setScriptMetadata","metadata","setMetadata","JSON","parse","localStorage","getItem","c","uuidv4","setItem","stringify","err","console","warn","data","result","entries","key","parseFlattenedKeys","init","last","level","part","errors","decodeScriptMetadataFromData","deepExtend","log","str","replaceAll","split","sausageToCamel","pop","w","toUpperCase","slice","toLowerCase","join","TourService","axios","req","getAttribute","location","this","post","response","tours","classNameGenerator","createGenerateClassName","productionPrefix","App","tourService","axiosStatic","create","baseURL","setTour","getTour","then","t","steps","StylesProvider","generateClassName","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.feb21845.chunk.js","sourcesContent":["import { CSSProperties } from '@material-ui/styles';\n\nexport const palette = {\n  primary: {\n    contrastText: '#fff',\n    main: '#8d4a99',\n  },\n};\n\nexport const theme: CSSProperties = {\n  color: 'rgba(0, 0, 0, 0.87)',\n};\n\nexport const typography: CSSProperties = {\n  fontFamily: '\"Roboto\", \"Helvetica\", \"Arial\", sans-serif',\n  fontSize: 16,\n};\n\nexport const base: CSSProperties = {\n  ...theme,\n  ...typography,\n};\n","import { CSSProperties } from '@material-ui/styles';\n\nimport { base, palette } from './base';\n\nexport const buttonBase: Record<string, CSSProperties> = {\n  '& button': {\n    ...base,\n    /** Structural */\n    ...{\n      alignContent: 'center',\n      alignItems: 'center',\n      borderRadius: '0.4em',\n      cursor: 'pointer',\n      display: 'inline-flex',\n      flexDirection: 'row',\n      justifyContent: 'center',\n      lineHeight: '1.5em',\n      minWidth: '5em',\n      overflow: 'hidden',\n      padding: '0.6em 0.8em',\n      position: 'relative',\n      transition: 'background 100ms linear',\n      zIndex: 1,\n    },\n    /** Reset */\n    background: 'rgba(0, 0, 0, 0)',\n    border: 'none',\n  },\n  '& button::before': {\n    background: '#000',\n    bottom: 0,\n    content: '\"\"',\n    left: 0,\n    opacity: 0,\n    position: 'absolute',\n    right: 0,\n    top: 0,\n    zIndex: -1,\n  },\n  '& button:active::before, & button:hover::before, & button:focus::before': {\n    opacity: 0.07,\n  },\n  '& button:disabled': {\n    cursor: 'default',\n    opacity: 0.5,\n    pointerEvents: 'none',\n  },\n};\n\nexport const buttonContained: Record<string, CSSProperties> = {\n  '& button.nctv-contained': {\n    boxShadow:\n      '0px 2px 1px -1px rgba(0,0,0,0.2),0px 1px 1px 0px rgba(0,0,0,0.14),0px 1px 3px 0px rgba(0,0,0,0.12)',\n  },\n  '& button.nctv-contained::before': {\n    opacity: 0.07,\n  },\n  '& button.nctv-contained:active::before, & button.nctv-contained:hover::before, & button.nctv-contained:focus::before':\n    {\n      opacity: 0,\n    },\n};\n\nexport const buttonPrimary: Record<string, CSSProperties> = {\n  '& button.nctv-primary': {\n    color: palette.primary.contrastText,\n  },\n  '& button.nctv-primary::before': {\n    background: palette.primary.main,\n    opacity: 1,\n  },\n  '& button.nctv-primary:active::before, & button.nctv-primary:hover::before, & button.nctv-primary:focus::before':\n    {\n      opacity: 0.85,\n    },\n};\n\nexport const button = {\n  ...buttonBase,\n  ...buttonContained,\n  ...buttonPrimary,\n};\n","import { styled } from '@material-ui/styles';\n\nimport { base } from './theme/base';\nimport { button } from './theme/button';\n\nexport const ThemeContainer = styled('div')({\n  ...base,\n  ...button,\n  '& p': {\n    ...base,\n    margin: '1em 0',\n  },\n});\n","import { styled } from '@material-ui/styles';\nimport React, { CSSProperties } from 'react';\nimport { CSSTransition } from 'react-transition-group';\n\nexport type MaskProps = {\n  active: boolean;\n  onOutEnd?: () => void;\n  ref?: React.RefCallback<HTMLElement>;\n  style?: CSSProperties;\n};\n\nconst MaskInner = styled('div')({\n  '&, &.enter, &.exit.exit-active, &.exit-done': {\n    opacity: 0,\n  },\n  '&.enter-active, &.exit-active': {\n    transition: 'opacity 250ms linear',\n  },\n  '&.enter.enter-active, &.enter-done, &.exit': {\n    opacity: 1,\n  },\n  borderColor: 'rgba(0, 0, 0, 0.7)',\n  borderStyle: 'solid',\n  bottom: 0,\n  left: 0,\n  position: 'fixed',\n\n  right: 0,\n\n  top: 0,\n\n  zIndex: 1111,\n});\n\nexport const Mask: React.FC<MaskProps> = ({\n  active,\n  children,\n  onOutEnd = () => undefined,\n  ref,\n  style,\n}) => {\n  const maskRef = React.useRef<HTMLElement | null>(null);\n  const [maskActive, setMaskActive] = React.useState(active);\n  const [maskClosed, setMaskClosed] = React.useState(false);\n\n  React.useEffect(() => {\n    if (active && !maskActive && !maskClosed) {\n      setMaskActive(true);\n    } else if (maskClosed) {\n      setMaskActive(false);\n      setMaskClosed(false);\n    }\n  }, [active, maskActive, maskClosed]);\n\n  return (\n    <CSSTransition\n      in={active}\n      onExited={onOutEnd}\n      nodeRef={maskRef}\n      timeout={250}\n    >\n      <MaskInner\n        ref={(el: HTMLElement | null) => {\n          maskRef.current = el;\n          ref?.(el);\n        }}\n        style={{\n          ...style,\n          ...(!maskActive\n            ? { pointerEvents: 'none', visibility: 'hidden' }\n            : undefined),\n        }}\n      >\n        {children}\n      </MaskInner>\n    </CSSTransition>\n  );\n};\n","import { styled } from '@material-ui/styles';\n\nexport const Flex = styled('div')({\n  display: 'flex',\n});\n\nexport const FlexColumn = styled(Flex)({\n  alignItems: 'stretch',\n  flexDirection: 'column',\n  justifyContent: 'flex-start',\n});\n\nexport const FlexRow = styled(Flex)({\n  alignItems: 'center',\n  justifyContent: 'center',\n});\n\nexport const FlexContent = styled('div')({\n  flex: 1,\n});\n\nexport const FlexItem = styled('div')({});\n","import { Placement } from '@popperjs/core';\nimport React from 'react';\nimport { usePopper } from 'react-popper';\n\nexport type PopperProps = React.HTMLAttributes<HTMLDivElement> & {\n  anchorEl?: HTMLElement;\n  offset?: number;\n  open: boolean;\n  placement?: Placement;\n};\n\nexport const Popper: React.FC<PopperProps> = ({\n  anchorEl,\n  children,\n  offset = 0,\n  open,\n  placement,\n  ...divProps\n}) => {\n  const [popperEl, setPopperEl] = React.useState<HTMLElement | null>(null);\n  const { attributes, styles } = usePopper(anchorEl, popperEl, {\n    modifiers: [{ name: 'offset', options: { offset: [0, offset] } }],\n    placement,\n  });\n\n  return (\n    <div\n      ref={setPopperEl}\n      {...divProps}\n      style={{\n        ...divProps.style,\n        ...styles.popper,\n        ...(!open\n          ? { pointerEvents: 'none', visibility: 'hidden' }\n          : undefined),\n      }}\n      {...attributes.popper}\n    >\n      {children}\n    </div>\n  );\n};\n","import { styled } from '@material-ui/styles';\nimport React from 'react';\nimport { ReactNode } from 'react';\nimport { CSSTransition } from 'react-transition-group';\n\nimport { FlexColumn, FlexContent, FlexRow } from './Flex';\nimport { Popper } from './Popper';\n\nexport type PopupProps = {\n  anchorEl?: HTMLElement;\n  buttons?: ReactNode[];\n  onOutEnd?: () => void;\n  open: boolean;\n};\n\nconst Content = styled(FlexContent)({\n  fontSize: '1.2em',\n  padding: '1em',\n});\n\nconst Buttons = styled(FlexRow)({\n  '& > *': {\n    marginLeft: '1em',\n  },\n  justifyContent: 'flex-end',\n  padding: '1em',\n});\n\nconst Systray = styled('div')({\n  bottom: '2em',\n  height: 'auto',\n  maxWidth: '35em',\n  position: 'fixed',\n  right: '2em',\n});\n\nconst Inner = styled(FlexColumn)({\n  backgroundColor: 'white',\n  borderRadius: '1em',\n  position: 'relative',\n});\n\nconst TransitionSlideFade = styled('div')({\n  '&, &.enter, &.exit.exit-active, &.exit-done': {\n    opacity: 0,\n    top: '2em',\n  },\n  '&.enter-active, &.exit-active': {\n    transition: 'opacity 250ms ease-in, top 250ms ease-in',\n  },\n  '&.enter.enter-active, &.enter-done, &.exit': {\n    opacity: 1,\n    top: 0,\n  },\n  '[data-popper-placement=\"bottom\"] &::before': {\n    left: 'calc(50% - 0.5em)',\n    top: '-0.5em',\n  },\n  '[data-popper-placement=\"left\"] &::before': {\n    right: '-0.5em',\n    top: 'calc(50% - 0.5em)',\n  },\n  '[data-popper-placement=\"right\"] &::before': {\n    left: '-0.5em',\n    top: 'calc(50% - 0.5em)',\n  },\n  '[data-popper-placement=\"top\"] &::before': {\n    bottom: '-0.5em',\n    left: 'calc(50% - 0.5em)',\n  },\n  '[data-popper-placement] &::before': {\n    backgroundColor: 'white',\n    boxShadow:\n      '0px 3px 5px -1px rgba(0, 0, 0, 0.2), 0px 5px 8px 0px rgba(0, 0, 0, 0.14), 0px 1px 14px 0px rgba(0, 0, 0, 0.12)',\n    content: '\"\"',\n    display: 'block',\n    height: '1em',\n    position: 'absolute',\n    transform: 'rotate(45deg)',\n    width: '1em',\n  },\n  borderRadius: '1em',\n  boxShadow:\n    '0px 3px 5px -1px rgba(0, 0, 0, 0.2), 0px 5px 8px 0px rgba(0, 0, 0, 0.14), 0px 1px 14px 0px rgba(0, 0, 0, 0.12)',\n  position: 'relative',\n});\nexport const Popup: React.FC<PopupProps> = ({\n  anchorEl,\n  buttons = [],\n  children,\n  onOutEnd = () => undefined,\n  open,\n}) => {\n  const transitionRef = React.useRef(null);\n  const [popperActive, setPopperActive] = React.useState(open);\n  const [popperClosed, setPopperClosed] = React.useState(false);\n\n  React.useEffect(() => {\n    if (open && !popperActive && !popperClosed) {\n      setPopperActive(true);\n    } else if (popperClosed) {\n      setPopperActive(false);\n      setPopperClosed(false);\n    }\n  }, [open, popperActive, popperClosed]);\n\n  return anchorEl !== undefined ? (\n    <Popper\n      anchorEl={anchorEl}\n      offset={12}\n      open={popperActive}\n      placement=\"right\"\n      style={{ maxWidth: '35em', zIndex: 1112 }}\n    >\n      <CSSTransition\n        onExited={() => {\n          setPopperClosed(true);\n          onOutEnd();\n        }}\n        in={open}\n        nodeRef={transitionRef}\n        timeout={250}\n      >\n        <TransitionSlideFade ref={transitionRef}>\n          <Inner>\n            <Content>{children}</Content>\n            {buttons.length > 0 ? <Buttons>{buttons}</Buttons> : undefined}\n          </Inner>\n        </TransitionSlideFade>\n      </CSSTransition>\n    </Popper>\n  ) : (\n    <Systray\n      style={{\n        zIndex: 1112,\n        ...(!open ? { pointerEvents: 'none' } : undefined),\n      }}\n    >\n      <CSSTransition\n        onExited={() => {\n          setPopperClosed(true);\n          onOutEnd();\n        }}\n        in={open}\n        nodeRef={transitionRef}\n        timeout={250}\n      >\n        <TransitionSlideFade ref={transitionRef}>\n          <Inner>\n            <Content>{children}</Content>\n            {buttons.length > 0 ? <Buttons>{buttons}</Buttons> : undefined}\n          </Inner>\n        </TransitionSlideFade>\n      </CSSTransition>\n    </Systray>\n  );\n};\n","import React from 'react';\n\nimport { Popup } from './Popup';\n\nexport type TourStepPopupProps = {\n  active: boolean;\n  buttonDismissText?: string;\n  buttonNextText?: string;\n  html: string;\n  onDismiss?: () => void;\n  onNext?: () => void;\n  onOut?: () => void;\n  targetEl?: HTMLElement;\n};\n\nexport const TourStepPopup: React.FC<TourStepPopupProps> = ({\n  active,\n  buttonDismissText = 'Dismiss',\n  buttonNextText = 'Next',\n  html,\n  onDismiss = () => undefined,\n  onNext,\n  onOut = () => undefined,\n  targetEl,\n}) => {\n  return (\n    <Popup\n      anchorEl={targetEl}\n      buttons={[\n        <button key=\"dismiss\" onClick={() => onDismiss()}>\n          {buttonDismissText}\n        </button>,\n        onNext !== undefined ? (\n          <button className=\"nctv-primary\" key=\"next\" onClick={onNext}>\n            {buttonNextText}\n          </button>\n        ) : undefined,\n      ].filter((b) => b !== undefined)}\n      open={active}\n      onOutEnd={onOut}\n    >\n      <div dangerouslySetInnerHTML={{ __html: html }} />\n    </Popup>\n  );\n};\n","import React from 'react';\n\nimport { TourStep } from '../../../api/src/domain/TourStep';\nimport { Mask } from './Mask';\nimport { TourStepPopup } from './TourStepPopup';\n\nexport type TourSequenceProps = {\n  onComplete: (index: number) => void;\n  tour: TourStep[];\n};\n\nexport const TourSequence: React.FC<TourSequenceProps> = ({\n  onComplete,\n  tour,\n}) => {\n  const [stepIndex, setStepIndex] = React.useState<number>(-1);\n  const [nextStepIndex, setNextStepIndex] = React.useState<number>();\n\n  /** This is just here so we can trigger a render on scroll... there must be a better way. */\n  const [, setScrollYPosition] = React.useState<number>(window.scrollY);\n\n  const stepInfos = React.useMemo(() => {\n    return tour.map((step) => ({\n      step,\n      targetEl:\n        ((): HTMLElement | null => {\n          switch (step.selector?.type) {\n            case 'css':\n              return document.querySelector<HTMLElement>(step.selector.value);\n            case 'xpath':\n              return document.evaluate(\n                step.selector.value,\n                document,\n                null,\n                XPathResult.FIRST_ORDERED_NODE_TYPE,\n                null,\n              ).singleNodeValue as HTMLElement | null;\n            case undefined:\n              return null;\n          }\n        })() ?? undefined,\n    }));\n  }, [tour]);\n\n  React.useEffect(() => {\n    setTimeout(() => setStepIndex(0), 1000);\n\n    const handler = () => setScrollYPosition(window.scrollY);\n    window.addEventListener('scroll', handler);\n    return () => window.removeEventListener('scroll', handler);\n  }, []);\n\n  return (\n    <>\n      {stepInfos.map(({ step, targetEl }, i) => {\n        return (\n          <div key={i}>\n            {step.mask ? (\n              <Mask\n                active={\n                  nextStepIndex !== -1 &&\n                  ((stepIndex === i && nextStepIndex === undefined) ||\n                    nextStepIndex === i)\n                }\n                key={`mask-${i}`}\n                style={(() => {\n                  const rect = targetEl?.getBoundingClientRect();\n                  const x = rect?.x ?? 0;\n                  const y = rect?.y ?? 0;\n                  const width = rect?.width ?? 0;\n                  const height = rect?.height ?? 0;\n                  const borderBottomWidth = `calc(100vh - ${y + height}px)`;\n                  return {\n                    borderBottomWidth,\n                    borderLeftWidth: targetEl?.getBoundingClientRect().x,\n                    borderRightWidth: `calc(100vw - ${x + width}px)`,\n                    borderTopWidth: targetEl?.getBoundingClientRect().y,\n                  };\n                })()}\n              />\n            ) : undefined}\n            <TourStepPopup\n              active={nextStepIndex === undefined && stepIndex === i}\n              buttonDismissText={\n                step.buttons?.find((b) => b.action === 'dismiss')?.text\n              }\n              buttonNextText={\n                step.buttons?.find((b) => b.action === 'next')?.text\n              }\n              html={step.html}\n              key={`popup-${i}`}\n              onDismiss={() => setNextStepIndex(-1)}\n              onOut={() => {\n                if (nextStepIndex === -1) {\n                  onComplete(i);\n                } else if (nextStepIndex !== undefined) {\n                  setStepIndex(nextStepIndex);\n                  setNextStepIndex(undefined);\n                }\n              }}\n              onNext={\n                i < tour.length - 1 ? () => setNextStepIndex(i + 1) : undefined\n              }\n              targetEl={targetEl}\n            />\n          </div>\n        );\n      })}\n    </>\n  );\n};\n","/* eslint-disable no-console */\nimport Ajv from 'ajv';\nimport deepExtend from 'deep-extend';\nimport React from 'react';\nimport { v4 as uuidv4 } from 'uuid';\n\nimport { EventContext } from '../../../api/src/domain/EventContext';\nimport { RecursivePartial } from '../util/RecursivePartial';\n\nexport type EnactiveMetadata = {\n  apiHost: string;\n  context?: RecursivePartial<EventContext>;\n  siteId: string;\n};\n\n// This JSONSchemaType really slows down the compiler. But uncomment if making changes\nconst metadataSchema /*: JSONSchemaType<EnactiveScriptMetadata>*/ = {\n  properties: {\n    apiHost: {\n      type: 'string',\n    },\n    context: {\n      nullable: true,\n      properties: {\n        device: {\n          nullable: true,\n          properties: {\n            locale: {\n              nullable: true,\n              type: 'string',\n            },\n          },\n          type: 'object',\n        },\n        page: {\n          nullable: true,\n          properties: {\n            locale: {\n              nullable: true,\n              type: 'string',\n            },\n            url: {\n              nullable: true,\n              type: 'string',\n            },\n          },\n          type: 'object',\n        },\n        user: {\n          nullable: true,\n          properties: {\n            anonymous: {\n              nullable: true,\n              type: 'boolean',\n            },\n            id: {\n              nullable: true,\n              type: 'string',\n            },\n            locale: {\n              nullable: true,\n              type: 'string',\n            },\n          },\n          type: 'object',\n        },\n      },\n      type: 'object',\n    },\n    siteId: {\n      type: 'string',\n    },\n  },\n  type: 'object',\n};\nconst compiled = new Ajv().compile<EnactiveMetadata>(metadataSchema);\n\nconst selector = 'script[enactive\\\\.site-id]';\n\nexport const useEnactiveMetadata = (): EnactiveMetadata | undefined => {\n  const script = React.useMemo(() => {\n    return document.querySelector<HTMLScriptElement>(selector) ?? undefined;\n  }, []);\n  const scriptData = React.useMemo(\n    () => encodeScriptDataFromAttributes(script),\n    [script],\n  );\n\n  const [localStorageContext, setLocalStorageContext] =\n    React.useState<RecursivePartial<EventContext>>();\n  const [scriptMetadata, setScriptMetadata] =\n    React.useState<EnactiveMetadata>();\n  const [metadata, setMetadata] = React.useState<EnactiveMetadata>();\n\n  React.useEffect(() => {\n    const context = (() => {\n      try {\n        return (\n          (JSON.parse(\n            localStorage.getItem('enactive-context') ?? 'null',\n          ) as RecursivePartial<EventContext> | null) ?? undefined\n        );\n      } catch {}\n    })();\n\n    if (context === undefined) {\n      // Create a user id for local storage that will help track the user in a somewhat stable\n      // way and remember tours that they have dismissed server-side\n      const c: RecursivePartial<EventContext> = {\n        user: {\n          anonymous: true,\n          id: uuidv4(),\n        },\n      };\n      setLocalStorageContext(c);\n\n      try {\n        localStorage.setItem('enactive-context', JSON.stringify(c));\n      } catch (err) {\n        console.warn('Failed to set enactive device data in storage.', err);\n      }\n    } else {\n      setLocalStorageContext(context);\n    }\n  }, []);\n\n  React.useEffect(\n    () =>\n      setScriptMetadata(\n        decodeScriptMetadataFromData(scriptData, { script, selector }),\n      ),\n    [scriptData, script],\n  );\n\n  React.useEffect(() => {\n    if (localStorageContext !== undefined && scriptMetadata !== undefined) {\n      setMetadata(\n        deepExtend({}, { context: localStorageContext }, scriptMetadata),\n      );\n    } else {\n      setMetadata(undefined);\n    }\n  }, [scriptMetadata, localStorageContext]);\n\n  React.useEffect(() => {\n    console.log({ localStorageContext, metadata, scriptMetadata });\n  }, [localStorageContext, metadata, scriptMetadata]);\n\n  return metadata;\n};\n\nfunction encodeScriptDataFromAttributes(\n  script: HTMLScriptElement | undefined,\n): string {\n  if (script !== undefined) {\n    const params = new URLSearchParams();\n    for (const attr of script.attributes) {\n      if (attr.name.startsWith('enactive.') === true) {\n        params.append(attr.name.substring(9), attr.value);\n      }\n    }\n\n    if (params.has('api-host') === false) {\n      const a = document.createElement('a');\n      a.href = script.src;\n      params.append('api-host', `api.${a.hostname.replace('www.', '')}`);\n    }\n\n    params.sort();\n    return params.toString();\n  } else {\n    return '';\n  }\n}\n\nfunction decodeScriptMetadataFromData(\n  data: string | undefined,\n  { selector = '', script = undefined as HTMLScriptElement | undefined } = {},\n): EnactiveMetadata | undefined {\n  if (data === undefined) {\n    console.warn('Could not locate enactive script tag with metadata', {\n      script,\n      selector,\n    });\n    return undefined;\n  }\n\n  const result: Record<string, unknown> = {};\n  const params = new URLSearchParams(data).entries();\n  for (const [key, value] of params) {\n    const [init, last] = parseFlattenedKeys(key);\n    let level = result;\n    for (const part of init) {\n      if (part in level && typeof level[part] !== 'object') {\n        console.warn(\n          'Assigned both a value and an object on enactive script tag metadata',\n          { script, selector },\n        );\n      }\n\n      if (part in level) {\n        level = level[part] as Record<string, unknown>;\n      } else {\n        level = level[part] = {};\n      }\n    }\n\n    if (last in level) {\n      console.warn(\n        'Assigned duplicate values on enactive script tag metadata',\n        { script, selector },\n      );\n    }\n    level[last] = value;\n  }\n\n  if (compiled(result)) {\n    // If a user id was set and anonymous was not explicitly set, we treat it as non-anonymous\n    if (result.context?.user?.id !== undefined) {\n      result.context.user.anonymous ??= false;\n    }\n\n    return result;\n  } else {\n    console.warn('Invalid enactive script tag metadata', {\n      errors: compiled.errors,\n      result,\n      script,\n      selector,\n    });\n  }\n}\n\nfunction parseFlattenedKeys(key: string): [string[], string] {\n  const init = splitDot(key).map(sausageToCamel);\n  const last = init.pop() ?? '';\n  return [init, last];\n}\n\nfunction splitDot(str: string): string[] {\n  return (\n    str\n      // Trim dots\n      .replaceAll(/^\\.+|\\.+$/g, '')\n      // Reduce multiple dots\n      .replaceAll(/\\.+/g, '.')\n      .split('.')\n  );\n}\n\nfunction sausageToCamel(str: string): string {\n  // Convert sausage-case-keys to camelCaseKeys\n  return (\n    str\n      // Trim dashes\n      .replaceAll(/^-+|-+$/g, '')\n      // De-duplicate successive dashes\n      .replaceAll(/-+/g, '-')\n      .split('-')\n      .map((w, i) =>\n        i > 0 && w.length > 0\n          ? `${w[0].toUpperCase()}${w.slice(1).toLowerCase()}`\n          : w.toLowerCase(),\n      )\n      .join('')\n  );\n}\n","import { AxiosInstance } from 'axios';\nimport deepExtend from 'deep-extend';\nimport React from 'react';\n\nimport { EventContext } from '../../../api/src/domain/EventContext';\nimport {\n  FindToursRequest,\n  FindToursResponse,\n} from '../../../api/src/domain/FindTours';\nimport { Tour } from '../../../api/src/domain/Tour';\nimport { RecursivePartial } from '../util/RecursivePartial';\n\nexport class TourService {\n  constructor(private readonly axios: AxiosInstance) {}\n\n  public async getTour(\n    context: RecursivePartial<EventContext> = {},\n  ): Promise<Tour | undefined> {\n    const req: FindToursRequest = {\n      context: deepExtend(\n        {\n          device: {\n            locale:\n              document.querySelector('html')?.getAttribute('lang') ?? undefined,\n          },\n          page: {\n            url: window.location.href,\n          },\n          user: {\n            anonymous: true,\n            id: '',\n          },\n        },\n        context,\n      ),\n    };\n    const response = await this.axios.post<FindToursResponse>('tours', req);\n    return response.data.tours[0];\n  }\n}\n\nexport const TourServiceContext = React.createContext<TourService>(\n  null as unknown as TourService,\n);\n","import { createGenerateClassName, StylesProvider } from '@material-ui/styles';\nimport axiosStatic from 'axios';\nimport React from 'react';\n\nimport { TourStep } from '../../api/src/domain/TourStep';\nimport { ThemeContainer } from './components/ThemeContainer';\nimport { TourSequence } from './components/TourSequence';\nimport { useEnactiveMetadata } from './hooks/useEnactiveMetadata';\nimport { TourService } from './services/TourService';\n\nconst classNameGenerator = createGenerateClassName({\n  productionPrefix: 'enactive',\n});\n\nconst App: React.FC = () => {\n  const metadata = useEnactiveMetadata();\n  const tourService = React.useMemo(() => {\n    if (metadata !== undefined) {\n      const axios = axiosStatic.create({\n        baseURL: `https://${metadata.apiHost}/api/v1/sites/${metadata.siteId}`,\n      });\n      return new TourService(axios);\n    }\n  }, [metadata]);\n  const [tour, setTour] = React.useState<TourStep[]>();\n  React.useEffect(() => {\n    if (tourService !== undefined) {\n      void tourService.getTour().then((t) => setTour(t?.steps));\n    }\n  }, [tourService]);\n  return (\n    <StylesProvider generateClassName={classNameGenerator}>\n      <ThemeContainer>\n        {tour !== undefined ? (\n          <TourSequence onComplete={() => setTour(undefined)} tour={tour} />\n        ) : (\n          <></>\n        )}\n      </ThemeContainer>\n    </StylesProvider>\n  );\n};\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\n\nimport App from './App';\n\nimport 'typeface-roboto';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('enactive-app-root'),\n);\n"],"sourceRoot":""}